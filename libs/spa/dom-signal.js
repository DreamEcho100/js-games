import{onScopeCleanup as h,createEffect as d,getScopeId as g}from"./signals.js";function N(e,s,r){if(typeof e=="function"){d(()=>{const t=e();if(typeof t=="object"&&t!==null){for(const o in t)if(Object.prototype.hasOwnProperty.call(t,o)){const n=t[o];typeof n=="function"?d(()=>{const c=n();r(o,c)}):r(o,n)}return}s(t)});return}if(typeof e=="object"&&e!==null){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const o=e[t];typeof o=="function"?d(()=>{const n=o();r(t,n)}):r(t,o)}return}s(e)}function b(e,s){if(typeof e=="function"){d(()=>{const r=e();s(r)});return}s(e)}function j(e,s,r){switch(s){case"style":return N(r,t=>{if(t==null){e.style.cssText="";return}e.style.cssText=t},(t,o)=>{if(o==null){e.style[t]="";return}e.style[t]=o}),!0;case"className":return b(r,t=>{if(t==null){e.className="";return}e.className=t}),!0;case"dataSet":return N(r,t=>{if(t==null){e.dataset={};return}e.dataset=t},(t,o)=>{if(o==null){e.dataset[t]="";return}e.dataset[t]=o}),!0;case"ariaSet":{let t=new Set;return N(r,o=>{if(o==null){if(t.size>0)for(const n of t)e[n]="";t.clear();return}for(const n in o){const c=n,i=o[n];if(i==null){e[n]="";return}t.add(c),e[n]=i}},(o,n)=>{if(n==null){e[o]="";return}e[o]=n}),h(()=>{t.clear()}),!0}case"dangerouslySetInnerHTML":return b(r,t=>{if(t==null){e.innerHTML="";return}e.innerHTML=t}),!0;case"ref":{const t=r;return typeof t=="function"?t(e):t&&typeof t=="object"&&"current"in t&&(t.current=e),!0}}if(s.startsWith("on")){const t=s.slice(2).toLowerCase();let o=r,n,c;return Array.isArray(r)?(o=r[0],typeof r[1]=="boolean"?(n=r[1],c=r[1]):typeof r[1]=="object"&&(n=r[1].onAdd,c=r[1].onRemove)):o=r,e.addEventListener(t,o,n),h(()=>{e.removeEventListener(t,o,c)}),!0}return!1}function x(e,s,r){return b(r,t=>{if(typeof t=="boolean"){t?e.setAttribute(s,""):e.removeAttribute(s);return}e.setAttribute(s,t)}),!0}function E(e,s,r,t){b(t,o=>{if(typeof o=="boolean"){o?s.setAttributeNS(e,r,""):s.removeAttributeNS(e,r);return}s.setAttributeNS(e,r,o)})}function L(e,s,r){const t=document.createComment(`scope-${g()}list`);let o=new Map;return d(()=>{const n=new Map,c=e(),i=Math.max(c.length,o.size);let l=t;for(let f=0;f<i;f++){const p=c[f],y=s(p,f,c),m=o.get(y);if(f<c.length&&m&&m.value===p){for(let a=m.elems.length-1;a>=0;a--){const S=m.elems[a];l.parentNode&&l.parentNode.insertBefore(S,l)}n.set(y,m)}else if(f<c.length){const a=r(p,f,c),A=(Array.isArray(a)?a:[a]).map(u=>u instanceof Node?u:document.createTextNode(u==null?"":String(u)));for(let u=A.length-1;u>=0;u--){const w=A[u];l.parentNode?.insertBefore(w,l)}n.set(y,{value:p,elems:A})}l=n.get(y)?.elems[0]??l}for(const[f,p]of o)if(!n.has(f))for(const y of p.elems)y.remove();o=n}),h(()=>{for(const{elems:n}of o.values())for(const c of n)c.remove();o.clear()}),t}function _(e,s){const r=document.createComment(`scope-${g()}visible`);let t=[];return d(()=>{if(e()){const n=s();t=(Array.isArray(n)?n:[n]).map(i=>i instanceof Node?i:document.createTextNode(i==null?"":String(i)));for(const i of t)r.parentNode?.insertBefore(i,r)}else{for(const n of t)n.remove();t=[]}}),h(()=>{for(const o of t)o.remove();t=[]}),r}function $(e,s){const r=document.createComment(`scope-${g()}switch`);let t=[],o;return d(()=>{const n=e(),c=s[n];if(o!==n){o=n;for(const i of t)i.remove();if(t=[],c){const i=c();t=(Array.isArray(i)?i:[i]).map(f=>f instanceof Node?f:document.createTextNode(f==null?"":String(f)));for(const f of t)r.parentNode?.insertBefore(f,r)}}}),h(()=>{for(const n of t)n.remove();t=[]}),r}export{L as $list,$ as $switch,_ as $toggle,j as setGeneralTagAttribute,x as setTagAttribute,E as setTagAttributeNS};
