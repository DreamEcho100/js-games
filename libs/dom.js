async function a(r){return new Promise(i=>{const t=new Image;t.onload=function(n){const e=n.target;if("naturalHeight"in e&&"naturalWidth"in e&&(e.naturalHeight+e.naturalWidth===0||e.width+e.height===0)){i([new Error("Image has no dimensions"),null]);return}i([null,t])},t.onerror=function(n){const e=n instanceof Error?n.message:typeof n=="string"?n:`Error loading as image: ${r}`;i([new Error(`Failed to load image at ${r}: ${e}`),null])},t.src=r})}async function o(r){const i=await Promise.all(r.map(async n=>{const[e,l]=await a(n);return e?[new Error(`Failed to preload ${n}: ${e.message}`),null]:[null,l]})),t=new Array(i.length);for(let n=0;n<i.length;n++){const[e,l]=i[n];if(e)return[e,null];t[n]=l}return[null,t]}function s(r,i){const t=document.createElement("link");return t.rel="stylesheet",t.type="text/css",t.href=r,document.head.appendChild(t),i?.register(()=>{t.remove()}),t}function u(r,i,t,n){const e=window.devicePixelRatio||1;return r.width=t*e,r.height=n*e,r.style.width=`${t}px`,r.style.height=`${n}px`,r.style.aspectRatio=`${t} / ${n}`,i.scale(e,e),[r.width,r.height]}export{u as adjustCanvasDimensions,s as injectStylesheetLink,a as loadImageElement,o as loadManyImageElement};
